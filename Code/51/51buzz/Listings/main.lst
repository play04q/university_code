C51 COMPILER V9.54   MAIN                                                                  11/23/2022 13:44:55 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg52.h>
   2          sbit BUZZ = P2^5; //???????
   3          unsigned int code NoteFrequ[] = { //?? 1-7 ??? 1-7 ??????
   4           523, 587, 659, 698, 784, 880, 988, //?? 1-7
   5           1047, 1175, 1319, 1397, 1568, 1760, 1976 //?? 1-7
   6          };
   7          unsigned int code NoteReload[] = { //?? 1-7 ??? 1-7 ?????????
   8           65536 - (11059200/12) / (523*2), //?? 1
   9           65536 - (11059200/12) / (587*2), //2
  10           65536 - (11059200/12) / (659*2), //3
  11           65536 - (11059200/12) / (698*2), //4
  12           65536 - (11059200/12) / (784*2), //5
  13           65536 - (11059200/12) / (880*2), //6
  14           65536 - (11059200/12) / (988*2), //7
  15           65536 - (11059200/12) / (1047*2), //?? 1
  16           65536 - (11059200/12) / (1175*2), //2
  17           65536 - (11059200/12) / (1319*2), //3
  18           65536 - (11059200/12) / (1397*2), //4
  19           65536 - (11059200/12) / (1568*2), //5
  20           65536 - (11059200/12) / (1760*2), //6
  21           65536 - (11059200/12) / (1976*2), //7
  22          };
  23          bit enable = 1; //?????????
  24          bit tmrflag = 0; //?????????
  25          unsigned char T0RH = 0xFF; //T0 ???????
  26          unsigned char T0RL = 0x00; //T0 ???????
  27          void PlayTwoTiger();
  28          void main()
  29          {
  30   1       unsigned int i;
  31   1      
  32   1       EA = 1; //??????
  33   1       TMOD = 0x01; //?? T0 ????? 1
  34   1       TH0 = T0RH;
  35   1       TL0 = T0RL;
  36   1       ET0 = 1; //?? T0 ??
  37   1       TR0 = 1; //?? T0
  38   1      
  39   1       while (1)
  40   1       {
  41   2       PlayTwoTiger(); //????--????
  42   2       for (i=0; i<40000; i++); //??????
  43   2       }
  44   1      }
  45          /* ?????????? */
  46          void PlayTwoTiger()
  47          {
  48   1       unsigned char beat; //??????
  49   1       unsigned char note; //?????????
  50   1       unsigned int time = 0; //??????
  51   1       unsigned int beatTime = 0; //???????
  52   1       unsigned int soundTime = 0; //?????????
  53   1       //???????
  54   1       unsigned char code TwoTigerNote[] = {
C51 COMPILER V9.54   MAIN                                                                  11/23/2022 13:44:55 PAGE 2   

  55   1       1, 2, 3, 1, 1, 2, 3, 1, 3, 4, 5, 3, 4, 5,
  56   1       5,6, 5,4, 3, 1, 5,6, 5,4, 3, 1, 1, 5, 1, 1, 5, 1,
  57   1       };
  58   1       //???????,4 ????,1 ?? 1/4 ?,8 ?? 2 ?
  59   1       unsigned char code TwoTigerBeat[] = {
  60   1       4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 8, 4, 4, 8,
  61   1       3,1, 3,1, 4, 4, 3,1, 3,1, 4, 4, 4, 4, 8, 4, 4, 8,
  62   1       };
  63   1      
  64   1       for (beat=0; beat<sizeof(TwoTigerNote); ) //???????????
  65   1       {
  66   2        while (!tmrflag); //??????????,???????
  67   2       tmrflag = 0;
  68   2       if (time == 0) //??????????????
  69   2       {
  70   3       note = TwoTigerNote[beat] - 1;
  71   3       T0RH = NoteReload[note] >> 8;
  72   3       T0RL = NoteReload[note];
  73   3       //???????,?? 2 ????? 4,??????????????
  74   3       beatTime = (TwoTigerBeat[beat] * NoteFrequ[note]) >> 2;
  75   3       //??????,????? 0.75,??????
  76   3       soundTime = beatTime - (beatTime >> 2);
  77   3       enable = 1; //?????????
  78   3       time++;
  79   3       }
  80   2       else //??????????????
  81   2       {
  82   3       if (time >= beatTime) //????????????????,
  83   3       { //???????,????????
  84   4       time = 0;
  85   4       beat++;
  86   4       }
  87   3       else //?????????????,
  88   3       {
  89   4       time++; //??????
  90   4       if (time == soundTime) //???????,???????,
  91   4       { //?? 0.25*????????,
  92   5       enable = 0; //???????????
  93   5       }
  94   4       }
  95   3       }
  96   2       }
  97   1      }
  98          /* T0 ??????,????????? */
  99          void InterruptTimer0() interrupt 1
 100          {
 101   1       TH0 = T0RH; //???????
 102   1       TL0 = T0RL;
 103   1       tmrflag = 1;
 104   1       if (enable) //????????????
 105   1       BUZZ = ~BUZZ;
 106   1       else //?????????
 107   1       BUZZ = 1;
 108   1       }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    234    ----
   CONSTANT SIZE    =    120    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       1
C51 COMPILER V9.54   MAIN                                                                  11/23/2022 13:44:55 PAGE 3   

   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
