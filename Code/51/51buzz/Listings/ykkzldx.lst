C51 COMPILER V9.54   YKKZLDX                                                               02/23/2023 19:28:07 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE YKKZLDX
OBJECT MODULE PLACED IN .\Objects\ykkzldx.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ykkzldx.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\y
                    -kkzldx.lst) TABS(2) OBJECT(.\Objects\ykkzldx.obj)

line level    source

   1          /*#include <reg52.h>
   2          sbit beep = P2^5;
   3          unsigned char timer0H, timer0L, time;
   4          
   5          //单片机晶振采用11.0592MHz
   6          // 高八度     
   7          code unsigned char FREQH[] = {
   8              0xF2, 0xF3, 0xF5, 0xF5, 0xF6, 0xF7, 0xF8,    //低音
   9              0xF9, 0xF9, 0xFA, 0xFA, 0xFB, 0xFB, 0xFC, 0xFC,//标准
  10              0xFC, 0xFD, 0xFD, 0xFD, 0xFD, 0xFE,            //高音 
  11              0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFF};   //超高音 
  12          // 低八度
  13          code unsigned char FREQL[] = {
  14              0x42, 0xC1, 0x17, 0xB6, 0xD0, 0xD1, 0xB6,    //低音
  15              0x21, 0xE1, 0x8C, 0xD8, 0x68, 0xE9, 0x5B, 0x8F, //标准
  16              0xEE, 0x44, 0x6B, 0xB4, 0xF4, 0x2D,             //高音
  17              0x47, 0x77, 0xA2, 0xB6, 0xDA, 0xFA, 0x16};   //超高音
  18          code unsigned char song[] = {
  19          3,2,1, 2,2,1, 3,2,1, 2,2,1, 3,2,1, 5,2,1, 5,2,4,
  20          0,0,1, 6,1,1, 1,2,2, 2,2,2, 1,2,1, 1,2,2,
  21          0,0,1, 6,1,1, 1,2,1, 2,2,1, 3,2,1, 1,2,1, 1,2,2, 1,2,1, 6,2,1,
  22          6,1,1, 1,2,1, 2,2,1, 3,2,1, 1,2,2, 6,1,2, 2,2,1, 2,2,2, 2,2,1, 3,2,1, 3,2,4,
  23          3,2,1, 2,2,1, 3,2,1, 2,2,1, 3,2,1, 5,2,1, 5,2,4,
  24          0,0,1, 6,1,1, 1,2,2, 2,2,2, 1,2,1, 1,2,2,
  25          0,0,1, 6,1,1, 1,2,1, 2,2,1, 3,2,1, 1,2,1, 1,2,2, 1,2,1, 6,2,1,
  26          6,1,1, 1,2,1, 2,2,1, 3,2,1, 1,2,2, 6,1,2, 2,2,1, 2,2,2, 2,2,1, 3,2,1, 3,2,2, 4,2,1, 3,2,1, 5,2,1, 5,2,2,
  27          0,0,1, 5,2,2, 3,3,1, 2,3,1, 2,3,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 6,2,1, 5,2,1, 5,3,1, 6
             -,3,2, 6,3,1, 6,3,2,
  28          1,3,1, 2,3,1, 3,3,1, 5,3,2, 5,3,2, 1,3,2, 2,3,2, 2,3,4, 1,3,4, 
  29          0,0,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 6,2,1, 5,2,1, 5,3,1, 6,3,2, 6,3,1, 6,3,1, 1,3,1, 
  30          1,3,1, 2,3,1, 3,3,2, 5,3,2, 5,3,2, 3,3,2, 2,3,1, 2,3,4, 
  31          3,3,1, 2,3,1, 2,3,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 1,3,1, 6,2,1, 5,2,1, 5,3,1, 6,3,2, 6,3,1, 6
             -,3,2,
  32          1,3,1, 2,3,1, 3,3,1, 5,3,2, 5,3,2, 1,3,2, 2,3,2, 2,3,4,
  33          0,0,1, 2,3,1, 3,3,1, 1,3,1, 1,3,2, 1,3,1, 1,3,1, 1,3,2, 6,2,1, 5,3,1, 6,3,2, 6,3,1, 6,3,2, 1,3,1, 
  34          2,3,1, 3,3,1, 5,3,2, 5,3,2, 3,3,1, 2,3,2, 2,3,4,
  35          0,0,0,
  36          };
  37          
  38          void t0int() interrupt 1         //T0中断程序，控制发音的音调
  39          {
  40              TR0 = 0;                     //先关闭T0
  41              beep = !beep;          //输出方波, 发音
  42              TH0 = timer0H;               //下次的中断时间, 这个时间, 控制音调高低
  43              TL0 = timer0L;
  44              TR0 = 1;                     //启动T0
  45          }
  46          
  47          void delay(unsigned char t)     //延时程序，控制发音的时间长度
  48          {
  49              unsigned char t1;
  50              unsigned long t2;
  51              for(t1 = 0; t1 < t; t1++)    //双重循环, 共延时t个半拍
  52                for(t2 = 0; t2 < 10000; t2++); //延时期间, 可进入T0中断去发音
C51 COMPILER V9.54   YKKZLDX                                                               02/23/2023 19:28:07 PAGE 2   

  53              TR0 = 0;                        //关闭T0, 停止发音
  54          }
  55          
  56          void sing()                      //演奏一个音符
  57          {
  58              TH0 = timer0H;               //控制音调
  59              TL0 = timer0L;
  60              TR0 = 1;                     //启动T0, 由T0输出方波去发音
  61              delay(time);                 //控制时间长度
  62          }
  63          
  64          void main(void)
  65          {
  66              unsigned char k, i;
  67              TMOD = 1;                    //置T0定时工作方式1
  68              ET0 = 1;                     //开T0中断
  69              EA = 1;                      //开总中断
  70              while(1) 
  71            {
  72                i = 0;
  73                time = 1; 
  74                while(time) 
  75              {
  76                  k = song[i] + 7 * song[i + 1] - 1;//第i个是音符, 第i+1个是第几个八度
  77                  timer0H = FREQH[k];      //从数据表中读出频率数值
  78                  timer0L = FREQL[k];      //时间长度
  79                  time = song[i + 2];   //读出时间长度数值
  80                  i += 3;
  81                  sing();                  //发出一个音符
  82              }  
  83              }  
  84          }
  85          */


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
